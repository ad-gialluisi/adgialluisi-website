<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Le attività di Antonio Daniele - MySQL JDBC Snippets</title>
        <meta name="title" content="Le attività di Antonio Daniele - MySQL JDBC Snippets" />
        <meta name="description" content="Page that I wrote myself: This shows some JDBC snippets that may be used with MySQL/MariaDB" />
        <meta name="author" content="Antonio Daniele Gialluisi" />
        <meta name="keywords" content="Computer science, University, Materials, Article, SQL, JDBC, MySQL, MariaDB, Snippets, ResultSet, ResultSetMetadata, StringBuilder, ProcessBuilder, Process, Command-line, Table format" />

        <meta property="article:author" content="Antonio Daniele Gialluisi"/>
        <meta property="article:published_time" content="2025-11-19T00:00:00+00:00" />
        <meta property="article:modified_time" content="2025-11-19T00:00:00+00:00" />

        <meta property="og:title" content="Le attività di Antonio Daniele"/>
        <meta property="og:image" content="https://adgialluisi-website.pages.dev/assets/images/icona-antoniodaniele-attivita.png"/>
        <meta property="og:description" content="Page that I wrote myself: This shows some JDBC snippets that may be used with MySQL/MariaDB"/>
        <meta property="og:url" content="https://adgialluisi-website.pages.dev/university/dbdesign/mysql-jdbc-snippets.html"/>
        <meta property="og:type" content="website" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="Le attività di Antonio Daniele - MySQL JDBC Snippets" />
        <meta name="twitter:description" content="Page that I wrote myself: This shows some JDBC snippets that may be used with MySQL/MariaDB" />
        <meta name="twitter:image" content="https://adgialluisi-website.pages.dev/assets/images/icona-antoniodaniele-attivita.png"/>

        <link rel="icon" type="image/x-icon" sizes="32x32" href="https://adgialluisi-website.pages.dev/../../assets/images/favicon.ico">
        <link rel="shortcut icon" href="https://adgialluisi-website.pages.dev/../../assets/images/favicon.ico" type="image/x-icon">

        <link rel="stylesheet" href="../../assets/css/structure.css" />
        <link rel="stylesheet" href="../../assets/css/contents-specific.css"/>
        <link rel="stylesheet" href="../../assets/css/default-theme.css" title="Default theme" />
        <link rel="alternate stylesheet" href="../../assets/css/old-theme.css" title="Old theme" />
        <link rel="alternate stylesheet" href="../../assets/css/dark-theme.css" title="Dark theme" />

        <script src="../../assets/js/utils-logic.js"></script>
        <script src="../../assets/js/theme-logic.js" defer="true"></script>
        <script src="../../assets/js/multilang-logic.js" defer="true"></script>
        <script src="../../assets/js/entrypoint-logic.js" defer="true"></script>
    </head>
    <body>
    <script src="../../assets/js/preload-hiding-logic.js"></script>

    <div id="header">
        <div id="headerpextra">
        <h1 id="title">Le attività di Antonio Daniele</h1>

        

<ul id="extra-options">
     <li><a href="javascript:;" id="lang-button">
          <img alt="Italian flag" class="cont-lang-en" src="../../assets/images/italy-flag.png"/>
          <img alt="Union jack flag" class="cont-lang-it" src="../../assets/images/uk-flag.png"/>
     </a></li>
     <li><a href="javascript:;" id="theme-button">&nbsp;</a></li>
</ul>
        <div class="clearboth"></div>
        </div>

        <ul id="menubar">
            </li>
<li><a href="../../index.html" class="menubtn">HOME</a>
</li>
<li><a href="../../about.html" class="menubtn">About</a>
</li>
<li><a href="../../projects.html" class="menubtn">Projects</a>
</li>
<li><a href="../../university.html" class="menubtn">University</a>
</li>
<li><a href="../../sitemap.html" class="menubtn">Sitemap</a>
        </ul>
    </div>

    <div class="cont-coll">
         <div id="breadcrumb-bar">
         <span id="breadcrumb-bar-back"><a href="../dbdesign.html">..</a></span>
<span id="breadcrumb-bar-path"><a href="../../index.html"><span class="cont-lang-en">HOME</span><span class="lang-separator"> - </span><span class="cont-lang-it">Indice</span></a>/<a href="../../university.html"><span class="cont-lang-en">University</span><span class="lang-separator"> - </span><span class="cont-lang-it">Università</span></a>/<a href="../dbdesign.html"><span class="cont-lang-en">Databases</span><span class="lang-separator"> - </span><span class="cont-lang-it">Basi di dati</span></a>/<a href="mysql-jdbc-snippets.html"><span class="cont-lang-en">MySQL JDBC Snippets</span><span class="lang-separator"> - </span><span class="cont-lang-it">Snippet JDBC MySQL</span></a></span>
<div class="clearboth"></div>
         </div>

         <div class="content">
         <div class="cont-lang-en">
<h4 class="lang-label">English</h4>
<h3 class="content-title">Snippet JDBC MySQL</h3>
<p>In this document I present some Java snippets I used during my
practical portion of the Databases exam.<br />
It consisted of solving some requests with SQL on the MySQL DBMS, by
using JDBC.<br />
</p>
<ul>
<li><p>I’ve used this method to print to screen the contents of a
ResultSet’s instance, in a semi-tabular form:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="bu">String</span> <span class="fu">resultSet2String</span><span class="op">(</span><span class="bu">ResultSet</span> s<span class="op">)</span> <span class="kw">throws</span> <span class="bu">SQLException</span> <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">ResultSetMetaData</span> s <span class="op">=</span> m<span class="op">.</span><span class="fu">getMetaData</span><span class="op">();</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> nCols <span class="op">=</span> m<span class="op">.</span><span class="fu">getColumnCount</span><span class="op">();</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> currRow <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> nCols<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>      currRow<span class="op">.</span><span class="fu">add</span><span class="op">(</span>m<span class="op">.</span><span class="fu">getColumnLabel</span><span class="op">(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">));</span> <span class="co">// Yep, the first column is 1, not 0</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">/*</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">   * This part only makes the header</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">   */</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="bu">StringBuilder</span> bld <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">(</span><span class="st">&quot;=&quot;</span><span class="op">.</span><span class="fu">repeat</span><span class="op">(</span><span class="dv">30</span><span class="op">)</span> <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  bld<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;| &quot;</span> <span class="op">+</span> <span class="bu">String</span><span class="op">.</span><span class="fu">join</span><span class="op">(</span><span class="st">&quot; | &quot;</span><span class="op">,</span> currRow<span class="op">)</span> <span class="op">+</span> <span class="st">&quot; |</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  bld<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;=&quot;</span><span class="op">.</span><span class="fu">repeat</span><span class="op">(</span><span class="dv">30</span><span class="op">)</span> <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> <span class="op">(</span>s<span class="op">.</span><span class="fu">next</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>      currRow <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> nCols<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>           <span class="co">// With &#39;getObject&#39;, you may ignore the particular type of data, simplifying things</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>           <span class="co">// Yep, again, the first column is at position 1, not 0</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>           <span class="bu">Object</span> o <span class="op">=</span> s<span class="op">.</span><span class="fu">getObject</span><span class="op">(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>           <span class="bu">String</span> oStr <span class="op">=</span> o <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="st">&quot;NULL&quot;</span> <span class="op">:</span> o<span class="op">.</span><span class="fu">toString</span><span class="op">();</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>           currRow<span class="op">.</span><span class="fu">add</span><span class="op">(</span>oStr<span class="op">);</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Construct the row</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>      bld<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;| &quot;</span> <span class="op">+</span> <span class="bu">String</span><span class="op">.</span><span class="fu">join</span><span class="op">(</span><span class="st">&quot; | &quot;</span><span class="op">,</span> currRow<span class="op">)</span> <span class="op">+</span> <span class="st">&quot; |</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Despite the table not being perfectly aligned with characters,</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">// it is still readable, which is good, if you need to be quick</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">// about writing this method.</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> bld<span class="op">.</span><span class="fu">toString</span><span class="op">();</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<p>To verify the correctness of the method, I recommend to print the
results of a query like:</p>
<pre><code>SELECT 10, 100, 1000 UNION ALL 1000, 100, 10</code></pre>
<ul>
<li><p>I’ve used this method to execute external SQL scripts, this is
useful even to perform stdout/stderr redirection on external files, for
futher analysises:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">runMySQLScript</span><span class="op">(</span><span class="bu">String</span> username<span class="op">,</span> <span class="bu">String</span> userpassw<span class="op">,</span> <span class="bu">String</span> stdinPath<span class="op">,</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">String</span> stdoutPath<span class="op">,</span> <span class="bu">String</span> stderrPath<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span><span class="op">,</span> <span class="bu">InterruptedException</span> <span class="op">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Build the process to invoke, the first parameter is a binary path.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// If the binary is in the PATH environment variable, its name is sufficient,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// otherwise, the full path is expected</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">ProcessBuilder</span> pb <span class="op">=</span> <span class="kw">new</span> <span class="bu">ProcessBuilder</span><span class="op">(</span><span class="st">&quot;mysql&quot;</span><span class="op">,</span> <span class="st">&quot;-v&quot;</span><span class="op">,</span> <span class="st">&quot;-v&quot;</span><span class="op">,</span> <span class="st">&quot;-v&quot;</span><span class="op">,</span> <span class="st">&quot;-u&quot;</span><span class="op">,</span> username<span class="op">,</span> <span class="st">&quot;-p&quot;</span> <span class="op">+</span> userpassw<span class="op">);</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  pb<span class="op">.</span><span class="fu">redirectInput</span><span class="op">(</span><span class="kw">new</span> <span class="bu">File</span><span class="op">(</span>stdinPath<span class="op">));</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This is equivalent to &gt;/dev/null (or &gt;NUL in Windows) if stdoutPath == null</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  pb<span class="op">.</span><span class="fu">redirectOutput</span><span class="op">(</span>stdoutPath <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="bu">ProcessBuilder</span><span class="op">.</span><span class="fu">Redirect</span><span class="op">.</span><span class="fu">DISCARD</span> <span class="op">:</span> <span class="kw">new</span> <span class="bu">File</span><span class="op">(</span>stdoutPath<span class="op">));</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This is equivalent to 2&gt;/dev/null (or 2&gt;NUL in Windows) if stderrPath == null</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  pb<span class="op">.</span><span class="fu">redirectError</span><span class="op">(</span>stderrPath <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="bu">ProcessBuilder</span><span class="op">.</span><span class="fu">Redirect</span><span class="op">.</span><span class="fu">DISCARD</span> <span class="op">:</span> <span class="kw">new</span> <span class="bu">File</span><span class="op">(</span>stderrPath<span class="op">));</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Invoke the process and wait for it to complete</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Process</span> p <span class="op">=</span> pb<span class="op">.</span><span class="fu">start</span><span class="op">();</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> exitCode <span class="op">=</span> p<span class="op">.</span><span class="fu">waitFor</span><span class="op">();</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Throw exception if exit code is not 0</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// MySQL/MariaDB returns non-zero in case of errors</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>exitCode <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalStateException</span><span class="op">(</span><span class="st">&quot;Error during the execution of script </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">+</span> stdinPath <span class="op">+</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">, error code &quot;</span> <span class="op">+</span> exitCode<span class="op">);</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<p>This snippet is the equivalent of executing, on the command line:</p>
<pre><code>mysql -v -v -v -u USER_NAME -pUSER_PASSW &lt; STDIN_FILE &gt; STDOUT_FILE 2&gt; STDERR_FILE</code></pre>
<p>Please note that the three <code>-v</code> options enable the
so-called “table format”, equivalent to the interactive mode, in terms
of verbosity.</p>

</div>
<div class="cont-seplang"></div>
<div class="cont-lang-it">
<h4 class="lang-label">Italiano</h4>
<h3 class="content-title">Snippet JDBC MySQL</h3>
<p>In questo documento presento alcuni snippet Java che ho utilizzato
nell’esame pratico di Basi di Dati.<br />
Esso consisteva nella risoluzione di una serie di quesiti con SQL sul
DBMS MySQL, sfruttando JDBC.</p>
<ul>
<li><p>Ho usato questo metodo per stampare a schermo i contenuti di
un’istanza di ResultSet, in formato semi-tabellare:</p>
<pre class="java&lt;"><code>public static String resultSet2String(ResultSet s) throws SQLException {
  ResultSetMetaData s = m.getMetaData();
  int nCols = m.getColumnCount();
  List&lt;String&gt; currRow = new ArrayList&lt;&gt;();

  for (int i = 0; i &lt; nCols; i++) {
      currRow.add(m.getColumnLabel(i + 1)); // Yep, the first column is 1, not 0
  }

  /*
   * This part only makes the header
   */
  StringBuilder bld = new StringBuilder(&quot;=&quot;.repeat(30) + &quot;\n&quot;);
  bld.append(&quot;| &quot; + String.join(&quot; | &quot;, currRow) + &quot; |\n&quot;);
  bld.append(&quot;=&quot;.repeat(30) + &quot;\n&quot;);

  while (s.next()) {
      currRow = new ArrayList&lt;&gt;();
      for (int i = 0; i &lt; nCols; i++) {
           // With &#39;getObject&#39;, you may ignore the particular type of data, simplifying things
           // Yep, again, the first column is at position 1, not 0
           Object o = s.getObject(i + 1);
           String oStr = o == null ? &quot;NULL&quot; : o.toString();
           currRow.add(oStr);
      }
      // Construct the row
      bld.append(&quot;| &quot; + String.join(&quot; | &quot;, currRow) + &quot; |\n&quot;);
  }

  // Despite the table not being perfectly aligned with characters,
  // it is still readable, which is good, if you need to be quick
  // about writing this method.

  return bld.toString();
}</code></pre></li>
</ul>
<p>Per verificare la corretta scrittura del metodo, raccomando di
stampare i risultati di una query come:</p>
<pre><code>SELECT 10, 100, 1000 UNION ALL 1000, 100, 10</code></pre>
<ul>
<li><p>Ho usato questo metodo per eseguire script SQL esterni, questo è
utile anche per fare redirezione di stdout/stderr su file esterni, per
ulteriori analisi:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">runMySQLScript</span><span class="op">(</span><span class="bu">String</span> username<span class="op">,</span> <span class="bu">String</span> userpassw<span class="op">,</span> <span class="bu">String</span> stdinPath<span class="op">,</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">String</span> stdoutPath<span class="op">,</span> <span class="bu">String</span> stderrPath<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span><span class="op">,</span> <span class="bu">InterruptedException</span> <span class="op">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Build the process to invoke, the first parameter is a binary path.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// If the binary is in the PATH environment variable, its name is sufficient,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// otherwise, the full path is expected</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">ProcessBuilder</span> pb <span class="op">=</span> <span class="kw">new</span> <span class="bu">ProcessBuilder</span><span class="op">(</span><span class="st">&quot;mysql&quot;</span><span class="op">,</span> <span class="st">&quot;-v&quot;</span><span class="op">,</span> <span class="st">&quot;-v&quot;</span><span class="op">,</span> <span class="st">&quot;-v&quot;</span><span class="op">,</span> <span class="st">&quot;-u&quot;</span><span class="op">,</span> username<span class="op">,</span> <span class="st">&quot;-p&quot;</span> <span class="op">+</span> userpassw<span class="op">);</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  pb<span class="op">.</span><span class="fu">redirectInput</span><span class="op">(</span><span class="kw">new</span> <span class="bu">File</span><span class="op">(</span>stdinPath<span class="op">));</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This is equivalent to &gt;/dev/null (or &gt;NUL in Windows) if stdoutPath == null</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  pb<span class="op">.</span><span class="fu">redirectOutput</span><span class="op">(</span>stdoutPath <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="bu">ProcessBuilder</span><span class="op">.</span><span class="fu">Redirect</span><span class="op">.</span><span class="fu">DISCARD</span> <span class="op">:</span> <span class="kw">new</span> <span class="bu">File</span><span class="op">(</span>stdoutPath<span class="op">));</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This is equivalent to 2&gt;/dev/null (or 2&gt;NUL in Windows) if stderrPath == null</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  pb<span class="op">.</span><span class="fu">redirectError</span><span class="op">(</span>stderrPath <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="bu">ProcessBuilder</span><span class="op">.</span><span class="fu">Redirect</span><span class="op">.</span><span class="fu">DISCARD</span> <span class="op">:</span> <span class="kw">new</span> <span class="bu">File</span><span class="op">(</span>stderrPath<span class="op">));</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Invoke the process and wait for it to complete</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Process</span> p <span class="op">=</span> pb<span class="op">.</span><span class="fu">start</span><span class="op">();</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> exitCode <span class="op">=</span> p<span class="op">.</span><span class="fu">waitFor</span><span class="op">();</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Throw exception if exit code is not 0</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// MySQL/MariaDB returns non-zero in case of errors</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>exitCode <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalStateException</span><span class="op">(</span><span class="st">&quot;Error during the execution of script </span><span class="sc">\&quot;</span><span class="st">&quot;</span> <span class="op">+</span> stdinPath <span class="op">+</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">, error code &quot;</span> <span class="op">+</span> exitCode<span class="op">);</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<p>Questo snippet è equivalente ad eseguire, da riga di comando:</p>
<pre><code>mysql -v -v -v -u USER_NAME -pUSER_PASSW &lt; STDIN_FILE &gt; STDOUT_FILE 2&gt; STDERR_FILE</code></pre>
<p>Si noti che le tre opzioni <code>-v</code> abilitano il cosiddetto
“table format”, equivalente alla modalità interattiva, in termini di
prolissità.</p>

</div>
         </div>
    </div>

    <div id="footer">
        <div id="footer-container">
        Made with <a href="https://github.com/elluisian/sitextrens">Sitextrens</a>, by <a href="https://github.com/elluisian">elluisian</a>.
        </div>
    </div>
</html>